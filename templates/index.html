<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>ModStacker üõ†Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        [x-cloak] { display: none !important; }
        .scroll-hide::-webkit-scrollbar { display: none; }
        .drag-over {
            border-color: #3b82f6 !important;
            background: rgba(59, 130, 246, 0.1) !important;
        }
        .dragging { opacity: 0.5; }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 min-h-screen font-sans"
      x-data="app()" x-init="initApp()">

    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <div class="sticky top-0 z-50 bg-slate-800 border-b border-slate-700 shadow-lg p-4">
        <div class="flex justify-between items-center mb-3">
            <h1 class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 text-transparent bg-clip-text">
                <i class="fa-solid fa-cube"></i> ModStacker
            </h1>

            <div class="flex gap-2 items-center">
                <span class="text-xs text-slate-500" x-show="isSaving">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</span>
                <button @click="saveData()" class="px-4 py-2 bg-green-600 hover:bg-green-500 rounded text-sm font-bold transition">
                    <i class="fa-solid fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
            </div>
        </div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ -->
        <div class="flex items-center gap-3 flex-wrap">
            <span class="text-sm text-slate-400 font-semibold">–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –≤–µ—Ä—Å–∏–∏:</span>

            <div class="flex gap-2 flex-wrap items-center">
                <template x-for="(ver, idx) in targetVersions" :key="ver">
                    <div class="flex items-center gap-1 bg-blue-600 px-2 py-1 rounded text-xs font-mono">
                        <span x-text="ver"></span>
                        <button @click="removeVersion(idx)" class="ml-1 text-blue-200 hover:text-white">
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                    </div>
                </template>

                <div class="flex gap-1 items-center">
                    <input type="text"
                           x-model="newVersion"
                           @keyup.enter="addVersion()"
                           placeholder="1.21.5"
                           class="w-20 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-xs font-mono focus:border-blue-500 outline-none">
                    <button @click="addVersion()" class="bg-slate-700 hover:bg-slate-600 px-2 py-1 rounded text-xs transition">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                </div>
            </div>

            <button @click="resetChecks()" class="ml-auto text-xs text-slate-500 hover:text-slate-300 transition">
                <i class="fa-solid fa-rotate"></i> –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏
            </button>
        </div>
    </div>

    <div class="container mx-auto p-6 flex gap-6">

        <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –°–ø–∏—Å–æ–∫ –º–æ–¥–æ–≤ -->
        <div class="w-2/3 space-y-6">

            <template x-for="(cat, catIndex) in data.categories" :key="catIndex">
                <div class="bg-slate-800 rounded-xl border border-slate-700 overflow-hidden">
                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                    <div class="p-4 bg-slate-800/50 flex justify-between items-center border-b border-slate-700">
                        <h2 class="text-lg font-semibold flex items-center gap-2">
                            <i class="fa-solid fa-folder-open text-yellow-500"></i>
                            <input x-model="cat.name"
                                   @input="saveData()"
                                   class="bg-transparent outline-none focus:text-blue-400"
                                   placeholder="Category Name">
                        </h2>
                        <div class="flex gap-2 items-center">
                            <!-- –ö–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                            <button @click="cat.showExport = !cat.showExport"
                                    class="text-blue-400 hover:text-blue-300 text-sm transition">
                                <i class="fa-solid fa-file-export"></i> Export
                            </button>
                            <button @click="deleteCategory(catIndex)"
                                    class="text-red-500 hover:text-red-400 opacity-50 hover:opacity-100">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </div>
                    </div>

                    <!-- –ü–∞–Ω–µ–ª—å —ç–∫—Å–ø–æ—Ä—Ç–∞ (—Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º–∞—è) -->
                    <div x-show="cat.showExport"
                         x-collapse
                         class="p-4 bg-slate-900/50 border-b border-slate-700">
                        <div class="text-xs text-slate-500 mb-2 uppercase font-bold">
                            –°—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –º–æ–¥—ã –∏–∑ "<span x-text="cat.name"></span>"
                        </div>
                        <textarea readonly
                                  class="w-full h-24 bg-slate-900 rounded p-2 text-xs font-mono text-slate-400 border border-slate-700 resize-none focus:border-blue-500 outline-none"
                                  @click="$el.select()"
                                  x-text="exportCategory(cat)"></textarea>
                    </div>

                    <!-- –ó–æ–Ω–∞ –¥—Ä–æ–ø–∞ –¥–ª—è –º–æ–¥–æ–≤ -->
                    <div class="p-2 space-y-1 min-h-[100px]"
                         @dragover.prevent="$el.classList.add('drag-over')"
                         @dragleave="$el.classList.remove('drag-over')"
                         @drop="handleDrop($event, catIndex); $el.classList.remove('drag-over')">

                        <template x-for="(mod, modIndex) in cat.mods" :key="mod.slug">
                            <div class="group flex items-center justify-between p-3 rounded-lg hover:bg-slate-700 transition border border-transparent hover:border-slate-600 cursor-move"
                                 draggable="true"
                                 @dragstart="handleDragStart($event, catIndex, modIndex)"
                                 @dragend="$el.classList.remove('dragging')">

                                <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –∏–∫–æ–Ω–∫–∞ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ -->
                                <div class="flex items-center gap-3 flex-shrink-0">
                                    <i class="fa-solid fa-grip-vertical text-slate-600 group-hover:text-slate-500"></i>
                                    <img :src="mod.icon_url || 'https://cdn.modrinth.com/data/AANobbMI/icon.png'"
                                         class="w-10 h-10 rounded">
                                    <div>
                                        <div class="font-bold leading-tight" x-text="mod.title"></div>
                                        <div class="text-xs text-slate-500 font-mono" x-text="mod.slug"></div>
                                    </div>
                                </div>

                                <!-- –°—Ä–µ–¥–Ω—è—è —á–∞—Å—Ç—å: —Å—Ç–∞—Ç—É—Å—ã –≤–µ—Ä—Å–∏–π -->
                                <div class="flex-1 flex items-center gap-2 justify-end mr-4">
                                    <template x-if="!mod.checked">
                                        <button @click="checkMod(mod)"
                                                class="text-xs text-slate-500 hover:text-blue-400 transition px-3 py-1 border border-slate-700 rounded hover:border-blue-500">
                                            <i class="fa-solid fa-circle-check"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                                        </button>
                                    </template>

                                    <template x-if="mod.checking">
                                        <div class="text-yellow-500 animate-spin text-sm">
                                            <i class="fa-solid fa-circle-notch"></i>
                                        </div>
                                    </template>

                                    <template x-if="mod.checked && !mod.checking">
                                        <div class="flex gap-1 flex-wrap">
                                            <template x-for="ver in targetVersions" :key="ver">
                                                <div class="flex items-center gap-1 px-2 py-0.5 rounded text-xs font-mono"
                                                     :class="mod.versions && mod.versions[ver] ? 'bg-green-900/30 text-green-400 border border-green-700' : 'bg-red-900/30 text-red-400 border border-red-700'">
                                                    <span x-text="ver"></span>
                                                    <span x-text="mod.versions && mod.versions[ver] ? '‚úì' : '‚úó'"></span>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>

                                <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –∫–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è -->
                                <button @click="cat.mods.splice(modIndex, 1); saveData()"
                                        class="text-slate-600 hover:text-red-500 transition flex-shrink-0">
                                    <i class="fa-solid fa-xmark text-lg"></i>
                                </button>
                            </div>
                        </template>

                        <!-- –ü—É—Å—Ç–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è -->
                        <div x-show="cat.mods.length === 0" class="text-center p-8 text-slate-600 italic text-sm">
                            <i class="fa-solid fa-inbox text-3xl mb-2 opacity-30"></i><br>
                            –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å—é–¥–∞ –º–æ–¥—ã –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫
                        </div>
                    </div>
                </div>
            </template>

            <button @click="addCategory()" class="w-full py-3 border-2 border-dashed border-slate-700 text-slate-500 rounded-xl hover:border-slate-500 hover:text-slate-300 transition">
                + –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            </button>
        </div>

        <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –ü–æ–∏—Å–∫ -->
        <div class="w-1/3">
            <div class="sticky top-32 bg-slate-800 rounded-xl p-4 border border-slate-700 shadow-xl">
                <h3 class="font-bold mb-4 text-slate-400 uppercase text-xs tracking-wider">Modrinth Search</h3>

                <div class="relative">
                    <input type="text" x-model="searchQuery" @input.debounce.500ms="performSearch()"
                           placeholder="–ù–∞–π—Ç–∏ –º–æ–¥..."
                           class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-sm focus:border-blue-500 outline-none transition">
                    <i x-show="isSearching" class="fa-solid fa-spinner fa-spin absolute right-3 top-3.5 text-slate-500"></i>
                </div>

                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
                <div class="mt-4 space-y-2 max-h-[50vh] overflow-y-auto pr-1 scroll-hide">
                    <template x-for="result in searchResults" :key="result.slug">
                        <div class="bg-slate-900 p-3 rounded-lg border border-slate-700 hover:border-blue-500 transition group cursor-move relative"
                             draggable="true"
                             @dragstart="handleSearchDragStart($event, result)"
                             @click="addToCategory(result)">
                            <div class="flex gap-3">
                                <img :src="result.icon_url" class="w-10 h-10 rounded bg-slate-800 flex-shrink-0">
                                <div class="flex-1 min-w-0">
                                    <div class="font-bold text-sm truncate" x-text="result.title"></div>
                                    <div class="text-xs text-slate-500 line-clamp-2" x-text="result.description"></div>
                                </div>
                            </div>
                            <div class="absolute top-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition">
                                <i class="fa-solid fa-plus"></i>
                            </div>
                        </div>
                    </template>

                    <div x-show="searchResults.length === 0 && !isSearching && searchQuery.length > 0"
                         class="text-center text-slate-600 text-sm py-4">
                        –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
                    </div>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –º–∞—Å—Å–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ -->
            <div class="mt-4 space-y-2">
                <button @click="checkAll()"
                        :disabled="targetVersions.length === 0 || isCheckingAll"
                        class="w-full py-3 rounded-xl font-bold transition shadow-lg disabled:opacity-50 disabled:cursor-not-allowed relative"
                        :class="targetVersions.length > 0 ? 'bg-blue-600 hover:bg-blue-500 shadow-blue-900/20' : 'bg-slate-700'">
                    <span x-show="!isCheckingAll">
                        <i class="fa-solid fa-list-check"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í–°–ï –º–æ–¥—ã
                    </span>
                    <span x-show="isCheckingAll" class="flex items-center justify-center gap-2">
                        <i class="fa-solid fa-spinner fa-spin"></i>
                        <span x-text="checkProgress"></span>
                    </span>
                </button>

                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä Rate Limit -->
                <div class="text-xs text-center text-slate-500" x-show="apiDelay > 0">
                    <i class="fa-solid fa-clock"></i> –ó–∞—â–∏—Ç–∞ API: –∑–∞–¥–µ—Ä–∂–∫–∞ <span x-text="apiDelay"></span>–º—Å –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
                </div>
            </div>
        </div>
    </div>

    <!-- JS LOGIC -->
    <script>
        function app() {
            return {
                data: { categories: [] },
                searchQuery: '',
                searchResults: [],
                isSearching: false,
                isSaving: false,
                isCheckingAll: false,
                checkProgress: '',
                targetVersions: ['1.21.1', '1.21.2', '1.21.3', '1.21.4'],
                newVersion: '',
                draggedMod: null,
                draggedFromCategory: null,
                apiDelay: 200, // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
                apiCache: {}, // –ö—ç—à –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ API

                async initApp() {
                    const resp = await fetch('/api/data');
                    this.data = await resp.json();

                    if (this.data.targetVersions) {
                        this.targetVersions = this.data.targetVersions;
                    }

                    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º showExport –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                    this.data.categories.forEach(cat => {
                        if (cat.showExport === undefined) {
                            cat.showExport = false;
                        }
                    });
                },

                addVersion() {
                    const ver = this.newVersion.trim();
                    if (!ver) return;

                    if (!/^\d+\.\d+(\.\d+)?$/.test(ver)) {
                        alert('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–µ—Ä—Å–∏–∏! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç: 1.21.5');
                        return;
                    }

                    if (this.targetVersions.includes(ver)) {
                        alert('–≠—Ç–∞ –≤–µ—Ä—Å–∏—è —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞');
                        return;
                    }

                    this.targetVersions.push(ver);
                    this.targetVersions.sort(); // –°–æ—Ä—Ç–∏—Ä—É–µ–º –≤–µ—Ä—Å–∏–∏
                    this.newVersion = '';
                    this.resetChecks();
                    this.saveData();
                },

                removeVersion(idx) {
                    this.targetVersions.splice(idx, 1);
                    this.resetChecks();
                    this.saveData();
                },

                async performSearch() {
                    if (this.searchQuery.length < 2) {
                        this.searchResults = [];
                        return;
                    }
                    this.isSearching = true;
                    const resp = await fetch(`/api/search?q=${encodeURIComponent(this.searchQuery)}`);
                    this.searchResults = await resp.json();
                    this.isSearching = false;
                },

                addCategory() {
                    this.data.categories.push({
                        name: 'New Category',
                        mods: [],
                        showExport: false
                    });
                    this.saveData();
                },

                deleteCategory(idx) {
                    if(confirm('–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é?')) {
                        this.data.categories.splice(idx, 1);
                        this.saveData();
                    }
                },

                addToCategory(mod, targetCatIndex = 0) {
                    if (this.data.categories.length === 0) this.addCategory();

                    const exists = this.data.categories.some(c => c.mods.some(m => m.slug === mod.slug));
                    if (exists) {
                        alert('–≠—Ç–æ—Ç –º–æ–¥ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω!');
                        return;
                    }

                    this.data.categories[targetCatIndex].mods.push({
                        title: mod.title,
                        slug: mod.slug,
                        icon_url: mod.icon_url,
                        checked: false,
                        versions: {},
                        checking: false
                    });

                    this.searchQuery = '';
                    this.searchResults = [];

                    const addedMod = this.data.categories[targetCatIndex].mods[
                        this.data.categories[targetCatIndex].mods.length - 1
                    ];
                    this.checkMod(addedMod);
                },

                // Drag & Drop handlers
                handleDragStart(event, catIndex, modIndex) {
                    this.draggedMod = this.data.categories[catIndex].mods[modIndex];
                    this.draggedFromCategory = catIndex;
                    event.target.classList.add('dragging');
                    event.dataTransfer.effectAllowed = 'move';
                },

                handleSearchDragStart(event, mod) {
                    this.draggedMod = mod;
                    this.draggedFromCategory = null; // –ò–∑ –ø–æ–∏—Å–∫–∞
                    event.dataTransfer.effectAllowed = 'copy';
                },

                handleDrop(event, targetCatIndex) {
                    event.preventDefault();

                    if (!this.draggedMod) return;

                    // –ï—Å–ª–∏ –∏–∑ –ø–æ–∏—Å–∫–∞
                    if (this.draggedFromCategory === null) {
                        this.addToCategory(this.draggedMod, targetCatIndex);
                    } else {
                        // –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
                        const exists = this.data.categories[targetCatIndex].mods.some(
                            m => m.slug === this.draggedMod.slug
                        );

                        if (!exists && targetCatIndex !== this.draggedFromCategory) {
                            // –£–¥–∞–ª—è–µ–º –∏–∑ —Å—Ç–∞—Ä–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                            const modIndex = this.data.categories[this.draggedFromCategory].mods.findIndex(
                                m => m.slug === this.draggedMod.slug
                            );
                            this.data.categories[this.draggedFromCategory].mods.splice(modIndex, 1);

                            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–æ–≤—É—é
                            this.data.categories[targetCatIndex].mods.push(this.draggedMod);
                            this.saveData();
                        }
                    }

                    this.draggedMod = null;
                    this.draggedFromCategory = null;
                },

                async checkMod(mod) {
                    if (this.targetVersions.length === 0) {
                        alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –≤–µ—Ä—Å–∏—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏');
                        return;
                    }

                    mod.checking = true;

                    try {
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
                        const cacheKey = `${mod.slug}_${this.targetVersions.join('_')}`;

                        if (this.apiCache[cacheKey]) {
                            mod.versions = this.apiCache[cacheKey];
                            mod.checked = true;
                            mod.checking = false;
                            return;
                        }

                        // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç rate limit
                        await new Promise(r => setTimeout(r, this.apiDelay));

                        const resp = await fetch('/api/check_version', {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({
                                slug: mod.slug,
                                versions: this.targetVersions
                            })
                        });

                        const result = await resp.json();

                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
                        this.apiCache[cacheKey] = result;

                        mod.versions = result;
                        mod.checked = true;
                    } catch (e) {
                        console.error('Error checking mod:', e);
                        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –º–æ–¥–∞ ' + mod.title);
                    } finally {
                        mod.checking = false;
                        this.saveData();
                    }
                },

                async checkAll() {
                    if (this.targetVersions.length === 0) {
                        alert('–î–æ–±–∞–≤—å—Ç–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏');
                        return;
                    }

                    this.isCheckingAll = true;
                    let total = 0;
                    let current = 0;

                    // –°—á–∏—Ç–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
                    this.data.categories.forEach(c => total += c.mods.length);

                    for (let cat of this.data.categories) {
                        for (let mod of cat.mods) {
                            current++;
                            this.checkProgress = `${current}/${total}`;
                            await this.checkMod(mod);
                        }
                    }

                    this.isCheckingAll = false;
                    this.checkProgress = '';
                },

                resetChecks() {
                    this.data.categories.forEach(c => c.mods.forEach(m => {
                        m.checked = false;
                        m.versions = {};
                    }));
                    this.apiCache = {}; // –û—á–∏—â–∞–µ–º –∫—ç—à
                    this.saveData();
                },

                async saveData() {
                    this.isSaving = true;
                    const payload = {
                        ...this.data,
                        targetVersions: this.targetVersions
                    };

                    await fetch('/api/save', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify(payload)
                    });

                    setTimeout(() => this.isSaving = false, 500);
                },

                exportCategory(category) {
                    if (this.targetVersions.length === 0) {
                        return "–î–æ–±–∞–≤—å—Ç–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏...";
                    }

                    let text = "";
                    category.mods.forEach(mod => {
                        if (mod.checked && mod.versions) {
                            const hasSupport = Object.values(mod.versions).some(v => v === true);
                            if (hasSupport) {
                                text += `https://modrinth.com/mod/${mod.slug}\n`;
                            }
                        }
                    });

                    return text || "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–¥—ã –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...";
                }
            }
        }
    </script>
</body>
</html>
